# HTTP

## 1. 通信

通信，就是信息的传递和交换；

通信三要素：

- 通信的主体；
- 通信的内容；
- 通信的方式；

通信协议（Communication Protocol）是指通信的双方完成通信所必须遵守的规则和约定；

**通俗的理解：通信双方采用约定好的格式来发送和接收消息，这种事先约定好的通信格式，就叫做通信协议；**


## 2. HTTP协议

HTTP 协议即超文本传送协议 (HyperText Transfer Protocol) ，它规定了客户端与服务器之间进行网页内容传输时，所必须遵守的传输格式；

客户端要以HTTP协议要求的格式把数据提交到服务器

服务器要以HTTP协议要求的格式把内容响应给客户端

HTTP 协议采用了 请求/响应 的交互模型；

- **HTTP是无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。**
- HTTP是媒体独立的：这意味着，只要客户端和服务器知道如何处理的数据内容，任何类型的数据都可以通过HTTP发送。客户端以及服务器指定使用适合的MIME-type内容类型。
- HTTP是无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。


由于 HTTP 协议属于客户端浏览器和服务器之间的通信协议。因此，客户端发起的请求叫做 HTTP 请求，客户端发送到服务器的消息，叫做 HTTP 请求消息。

>  HTTP 请求消息又叫做 HTTP 请求报文；

## 3. HTTP请求消息的组成

客户端发送一个HTTP请求到服务器的请求消息包括以下格式：请求行（request line）、请求头部（header）、空行和请求数据四个部分组成；

> 请求行

请求行由请求方式、URL 和 HTTP 协议版本 3 个部分组成，他们之间使用空格隔开。

> 请求头部

请求头部用来描述客户端的基本信息，从而把客户端相关的信息告知服务器；

| 头部字段 | 说明 |
| -------- | ---- |
|Host|	要请求的服务器域名 |
|Connection	|客户端与服务器的连接方式(close 或 keepalive)|
|Content-Length|	用来描述请求体的大小|
|Accept	|客户端可识别的响应内容类型列表|
|User-Agent	|产生请求的浏览器类型|
|Content-Type|	客户端告诉服务器实际发送的数据类型|
|Accept-Encoding|	客户端可接收的内容压缩编码形式|
|Accept-Language |用户期望获得的自然语言的优先顺序|

关于更多请求头字段的描述，可以查看 MDN 官方文档：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers

> 空行

- 最后一个请求头字段的后面是一个空行，通知服务器请求头部至此结束；

- 请求消息中的空行，用来分隔请求头部与请求体；

> 请求体

请求体中存放的，是要通过 POST 方式提交到服务器的数据；

只有 POST 请求才有请求体，GET 请求没有请求体；

## 4. HTTP响应消息

响应消息就是服务器响应给客户端的消息内容，也叫作响应报文。

**HTTP响应消息由状态行、响应头部、空行 和 响应体 4个部分组成**

> 状态行

状态行由 HTTP 协议版本、状态码和状态码的描述文本 3 个部分组成，他们之间使用空格隔开；

> 响应头部

响应头部用来描述服务器的基本信息。响应头部由多行 键/值对 组成，每行的键和值之间用英文的冒号分隔；


关于更多响应头字段的描述，可以查看 MDN 官方文档：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers

> 空行

在最后一个响应头部字段结束之后，会紧跟一个空行，用来通知客户端响应头部至此结束；

响应消息中的空行，用来分隔响应头部与响应体；

> 响应体

响应体中存放的，是服务器响应给客户端的资源内容。

## 5. HTTP请求方法

**HTTP 请求方法，属于 HTTP 协议中的一部分，请求方法的作用是：用来表明要对服务器上的资源执行的操作。最常用的请求方法是 GET 和 POST。**

| 序号 | 方法 | 描述 |
| ---- | ---- | ---- |
|1|	GET|	(查询)发送请求来获得服务器上的资源，请求体中不会包含请求数据，请求数据放在协议头中。|
|2|	POST|	(新增)向服务器提交资源（例如提交表单或上传文件）。数据被包含在请求体中提交给服务器。|
|3|	PUT	|(修改)向服务器提交资源，并使用提交的新资源，替换掉服务器对应的旧资源.。|
|4|	DELETE|	(删除)请求服务器删除指定的资源。|
|5|	HEAD|	HEAD 方法请求一个与 GET 请求的响应相同的响应，但没有响应体。|
|6|	OPTIONS|	获取http服务器支持的http请求方法，允许客户端查看服务器的性能，比如ajax跨域时的预检等。|
|7|	CONNECT|	建立一个到由目标资源标识的服务器的隧道。|
|8|	TRACE	|沿着到目标资源的路径执行一个消息环回测试，主要用于测试或诊断。|
|9|	PATCH	|是对 PUT 方法的补充，用来对已知资源进行局部更新。|

## 6. HTTP响应状态码

HTTP 响应状态码（HTTP Status Code），也属于 HTTP 协议的一部分，用来标识响应的状态。

**响应状态码会随着响应消息一起被发送至客户端浏览器，浏览器根据服务器返回的响应状态码，就能知道这次 HTTP 请求的结果是成功还是失败了。**

HTTP 状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字用来对状态码进行细分。

HTTP 状态码共分为 5 种类型：

![image-20220407212951672](https://raw.githubusercontent.com/ximingx/Figurebed/master/img/202204072129735.png)

### 2开头

![image-20220407213026135](https://raw.githubusercontent.com/ximingx/Figurebed/master/img/202204072130173.png)

### 3开头

![image-20220407213041480](https://raw.githubusercontent.com/ximingx/Figurebed/master/img/202204072130520.png)

### 4开头

![image-20220407213052407](https://raw.githubusercontent.com/ximingx/Figurebed/master/img/202204072130437.png)

### 5开头

![image-20220407213106033](https://raw.githubusercontent.com/ximingx/Figurebed/master/img/202204072131077.png)